!function(window){"use strict";function run($rootScope,$window){$rootScope.rootScopeHostname=$window.location.hostname+"/"}angular.module("appShortenUrl",["ngRoute","ngMessages","ngStorage"]).run(run)}(),function(){function Config($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"view/url-new.view.html",controller:"ShortenCtrl"}),$routeProvider.when("/ranking",{templateUrl:"view/url-ranking.view.html",controller:"RankingCtrl"}),$routeProvider.when("/:alias",{templateUrl:"view/url-redirect.view.html",controller:"RetrieveCtrl"}),$routeProvider.otherwise({redirectTo:"/"})}angular.module("appShortenUrl").config(Config)}(),function(){angular.module("appShortenUrl").value("ConfigApp",{baseUrl:"http://localhost:8081/"})}(),function(){"use strict";function Controller($scope,ShortenUrlService){$scope.loadUrlsRanking=function(){$scope.filters.page=$scope.currentPage,$scope.filters.per_page=itemPerPage,ShortenUrlService.getUrlRanking($scope.filters).then(function(response){$scope.lastPage=response.data.meta.pagination.total_pages,$scope.urls=response.data.urls},function(response){$scope.error=response.data.Description})};var itemPerPage=10;$scope.lastPage=0,$scope.currentPage=1,$scope.filters={},$scope.urls=[],$scope.loadUrlsRanking()}angular.module("appShortenUrl").controller("RankingCtrl",Controller)}(),function(){"use strict";function Controller($window,$scope,$routeParams,ShortenUrlService){$scope.alias=$routeParams.alias,ShortenUrlService.getUrlByAlias($routeParams.alias).then(function(response){$window.location.href=response.data.url.address},function(response){switch(response.status){case 404:$scope.error="Desculpe não encontramos ;(";break;default:$scope.error="Não foi possível carregar os dados!"}})}angular.module("appShortenUrl").controller("RetrieveCtrl",Controller)}(),function(){"use strict";function Controller($scope,ShortenUrlService){$scope.saveUrl=function(){ShortenUrlService.postUrlShorten($scope.url).then(function(response){$scope.success=!0,$scope.url=response.data},function(response){switch($scope.success=!1,response.status){case 409:$scope.error="Esse endereço opcional já existe ;(";break;default:$scope.error="Houve um erro ao salvar, mas já estámos trabalhando nisso."}})},$scope.url={}}angular.module("appShortenUrl").controller("ShortenCtrl",Controller)}(),function(){"use strict";function Service($http,ConfigApp){function _getUrlRanking(filters){var urlPath=ConfigApp.baseUrl+"api/v1/url/ranking";return filters&&(urlPath+="?",angular.forEach(filters,function(value,key){value&&key&&(urlPath+="&",urlPath+=key+"="+value)})),$http.get(urlPath)}function _getUrlByAlias(alias){return $http.get(ConfigApp.baseUrl+"api/v1/url/details/"+alias)}function _postUrlShorten(url){return $http.post(ConfigApp.baseUrl+"api/v1/url/shorten",url)}return{getUrlRanking:_getUrlRanking,getUrlByAlias:_getUrlByAlias,postUrlShorten:_postUrlShorten}}angular.module("appShortenUrl").factory("ShortenUrlService",Service)}();